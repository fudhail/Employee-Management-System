@{
    ViewBag.Title = "Add Employee";

    var departmentList = ViewBag.DepartmentList as List<Employee.Models.Data.MasterTable>;
    var designationList = ViewBag.DesignationList as List<Employee.Models.Data.MasterTable>;
}


<div class="card p-4">
    <div class="panel pa">
        <div class="panel-heading text-center">
            <h2 class="panel-title" style="font-weight: 700; font-size: 28px; letter-spacing: 1px;">
                Add Employee Details
            </h2>
        </div>
        <form id="frmEmployee" method="POST">
            <!-- Employee ID -->
            <div class="form-group">
                <label for="eid" class="form-label">Employee ID</label>
                <input type="number" class="form-control" id="eid" name="Eid" value="@(Model == null ? "" : Model.Eid)" readonly>
            </div>

            <!-- Name -->
            <div class="form-group">
                <label for="name" class="form-label">Full Name</label>
                <input type="text" class="form-control" id="name" name="Name" required value="@(Model == null ? "" : Model.name)">
            </div>

            <!-- Age -->
            <div class="form-group">
                <label for="age" class="form-label">Age</label>
                <input type="number" class="form-control" id="age" name="Age" required value="@(Model == null ? "" : Model.age)">
            </div>

            <!-- Join Date -->
            <div class="form-group">
                <label for="joindate" class="form-label">Join Date</label>
                <input type="date" class="form-control" id="joindate" name="JoinDate" value="@(Model == null ? "" : Model.joindate)">
            </div>

            <!-- Date of Birth -->
            <div class="form-group">
                <label for="dob" class="form-label">Date of Birth</label>
                <input type="date" class="form-control" id="dob" name="DOB" value="@(Model == null ? "" : Model.dob)">
            </div>

            <!-- Salary -->
            <div class="form-group">
                <label for="salary" class="form-label">Salary</label>
                <input type="number" class="form-control" id="salary" name="Salary" value="@(Model == null ? "" : Model.salary)">
            </div>

            <!-- Department Dropdown -->
            <div class="form-group">
                <label for="department" class="form-label">Department</label>
                <select class="form-control" id="department" name="DeptId" required>
                    <option value="" disabled selected>Select Department</option>
                    @foreach (var dept in departmentList)
                    {
                        <option value="@dept.MID" @(Model != null && Model.dept == dept.MNAME ? "selected" : "")>@dept.MNAME</option>
                    }
                </select>
            </div>

            <!-- Designation Dropdown -->
            <div class="form-group">
                <label for="designation" class="form-label">Designation</label>
                <select class="form-control" id="designation" name="DesignId" required>
                    <option value="" disabled selected>Select Designation</option>
                    @foreach (var design in designationList)
                    {
                        <option value="@design.MID" @(Model != null && Model.desig == design.MNAME ? "selected" : "")>@design.MNAME</option>
                    }
                </select>
            </div>

            <!-- Gender -->
            <div class="form-group">
                <label class="form-label d-block">Gender</label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="Sex" id="male" value="M" @(Model != null && Model.sex == "M" ? "checked" : "")>
                    <label class="form-check-label" for="male">Male</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="Sex" id="female" value="F" @(Model != null && Model.sex == "F" ? "checked" : "")>
                    <label class="form-check-label" for="female">Female</label>
                </div>
            </div>

            <!-- Phone Number -->
            <div class="form-group">
                <label for="phno" class="form-label">Phone Number</label>
                <input type="tel" class="form-control" id="phno" name="PhNo" value="@(Model == null ? "" : Model.phno)">
            </div>

            <hr />
            <button type="button" onclick="saveEmployee()" class="btn btn-primary">Submit</button>
        </form>
    </div>

<script>
    function saveEmployee() {
     
    var frm = $('#frmEmployee')
    var frmdata = JSON.stringify(frm.serializeArray());
    console.log(frmdata);

    $.ajax({
        type: "POST",
        url: "/Employee/SaveEmployee",
        dataType: "JSON",
        contentType: "JSON",
        data: JSON.stringify({ sdata: frmdata }),
        success: function (response) {
            if (response == "success") {
                alert(response);
                window.location.href = "/Employee/Index";
            }
            else {
                alert(response);
                //window.location.href = "/newlogin/error";
            }
        },
        error: function (xhr, status, error) { }
    });
        }
</script>
